name: zsh
version:
  source: "url:https://sourceforge.net/projects/zsh/files/zsh/"
  exclude_patterns: "(alpha|beta|rc|dev|preview|pre|snapshot|nightly|test|unstable|canary|next|edge|weekly|daily|doc)"
  extract_pattern: 'zsh-([0-9]+\.[0-9]+(?:\.[0-9]+)?)'
build_type: gnu_autotools
description: "UNIX shell (command interpreter)"

download:
  download_url: "https://downloads.sourceforge.net/project/zsh/zsh/{version}/zsh-{version}.tar.xz"
  platforms:
    darwin-x86_64:
    darwin-arm64:
    linux-amd64:
    linux-arm64:
security:
  verify_signature: false
  scan_vulnerabilities: true

configure:
  flags:
    - --prefix=$PREFIX
    - --enable-etcdir=$PREFIX/etc
    - --enable-zshenv=$PREFIX/etc/zshenv
    - --enable-zshrc=$PREFIX/etc/zshrc
    - --enable-zprofile=$PREFIX/etc/zprofile
    - --enable-zlogin=$PREFIX/etc/zlogin
    - --enable-zlogout=$PREFIX/etc/zlogout
    - --enable-fndir=$PREFIX/share/zsh/functions
    - --enable-scriptdir=$PREFIX/share/zsh/scripts
    - --enable-site-fndir=$PREFIX/share/zsh/site-functions
    - --enable-site-scriptdir=$PREFIX/share/zsh/site-scripts
    - --enable-multibyte
    - --enable-pcre
    - --with-tcsetpgrp

build:
  timeout_minutes: 10
  out_of_tree: false

dependencies:
  - make
  - gcc
  - ncurses
